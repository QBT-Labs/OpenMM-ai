#!/usr/bin/env node

import { execFileSync } from "node:child_process";

// ---------------------------------------------------------------------------
// ANSI helpers
// ---------------------------------------------------------------------------

const RESET = "\x1B[0m";
const BOLD = "\x1B[1m";
const DIM = "\x1B[38;5;102m";
const CYAN = "\x1B[36m";

const GRAYS = [
  "\x1B[38;5;75m",  // light blue
  "\x1B[38;5;69m",
  "\x1B[38;5;63m",
  "\x1B[38;5;62m",
  "\x1B[38;5;61m",
  "\x1B[38;5;60m",  // dark blue
];

// ---------------------------------------------------------------------------
// ASCII art — OpenMM
// ---------------------------------------------------------------------------

const LOGO = [
  " ██████╗ ██████╗ ███████╗███╗   ██╗███╗   ███╗███╗   ███╗",
  "██╔═══██╗██╔══██╗██╔════╝████╗  ██║████╗ ████║████╗ ████║",
  "██║   ██║██████╔╝█████╗  ██╔██╗ ██║██╔████╔██║██╔████╔██║",
  "██║   ██║██╔═══╝ ██╔══╝  ██║╚██╗██║██║╚██╔╝██║██║╚██╔╝██║",
  "╚██████╔╝██║     ███████╗██║ ╚████║██║ ╚═╝ ██║██║ ╚═╝ ██║",
  " ╚═════╝ ╚═╝     ╚══════╝╚═╝  ╚═══╝╚═╝     ╚═╝╚═╝     ╚═╝",
];

// ---------------------------------------------------------------------------
// Show banner
// ---------------------------------------------------------------------------

console.log();
LOGO.forEach((line, i) => {
  console.log(`${GRAYS[i]}${line}${RESET}`);
});
console.log();
console.log(`  ${BOLD}${CYAN}QBT Labs${RESET}  ${DIM}— Open-source market making for AI agents${RESET}`);
console.log();

// ---------------------------------------------------------------------------
// Delegate to skills CLI
// ---------------------------------------------------------------------------

const args = process.argv.slice(2);
const skillsArgs = ["skills", "add", "QBT-Labs/OpenMM-ai", ...args];

try {
  execFileSync("npx", skillsArgs, { stdio: "inherit" });
} catch (err) {
  process.exit(err.status ?? 1);
}
